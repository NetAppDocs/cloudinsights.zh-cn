---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: performance policy, performance, thresholds, alerts, preference, delete 
summary: 创建监控器，以便针对性能或清单阈值发出警报 
---
= 向监控器发出警报


[role="lead"]
您可以创建监控器来设置触发警报的阈值，以便向您通知与网络中资源相关的问题。例如，您可以创建一个监控器，以便针对任意多种协议发出 _node write latency 警报。


TIP: Cloud Insights 标准版及更高版本提供了监控和警报功能。

达到或超过受监控的阈值和条件时， Cloud Insights 将创建警报。一个监控器可以具有 _Warning_ 阈值， _critical_ 阈值，也可以同时具有这两者。

您可以使用监控器为 " 基础架构 " 对象（例如存储， VM ， EC2 和端口）以及 " 集成 " 数据（例如为 Kubernetes ， ONTAP 高级指标和 Telegraf 插件收集的数据）设置阈值。监控超过阈值时向您发出的警报，您可以设置警告级别警报，严重级别警报或两者的阈值。



=== 创建监控器

在以下示例中，我们将创建一个监控器，以便在 _Volume Node NFS 写入延迟 _ 达到或超过 200 毫秒时发出警告警报，并在达到或超过 400 毫秒时发出严重警报。我们只希望在超过任一阈值至少持续 15 分钟时收到警报。



==== 要求

* 必须配置 Cloud Insights 以收集集成数据，并且正在收集该数据。




==== 创建监控器

. 从 Cloud Insights 菜单中，单击 * 警报 > 管理监控器 *
+
此时将显示监控器列表页面，其中显示了当前配置的监控器。

. 要添加监控器，请单击 * + Monitor* 。要修改现有监控器，请单击列表中的监控器名称。
+
此时将显示 Monitor Configuration 对话框。

. 在下拉列表中，搜索并选择要监控的对象类型和指标，例如 _netapp_ontap_volume_node_nfs_write_latter_ 。


您可以设置筛选器以缩小要监控的对象属性或指标范围。

image:MonitorMetricFilter.png["指标筛选"]

使用集成数据（ Kubernetes ， ONTAP 高级数据等）时，指标筛选会从绘制的数据系列中删除单个 / 不匹配的数据点，而不像基础架构数据（存储， VM ，端口等）那样，基础架构数据（存储， VM ，端口等）中的筛选器会处理数据系列的聚合值，并可能从图表中删除整个对象。


TIP: 要创建多条件监控器（例如， IOPS > X 和延迟 > Y ），请将第一个条件定义为阈值，将第二个条件定义为筛选器。



==== 定义监控器的条件。

. 选择要监控的对象和指标后，设置警告级别和 / 或严重级别阈值。
. 对于 _Warning_ 级别，输入 200 。指示此警告级别的虚线显示在示例图中。
. 对于 _critical_ 级别，输入 400 。指示此严重级别的虚线显示在示例图中。
+
此图显示历史数据。图中的 " 警告 " 和 " 严重 " 级别行是监控器的可视表示，因此您可以轻松查看监控器在每种情况下何时可能触发警报。

. 对于发生时间间隔，请选择 _continuous_ ，持续时间为 _15 分钟。
+
您可以选择在违反阈值时触发警报，或者等待阈值在一段时间内持续违反。在我们的示例中，我们不希望在总 IOPS 峰值高于 " 警告 " 或 " 严重 " 级别时都收到警报，但仅当受监控对象持续超过其中一个级别至少 15 分钟时才会收到警报。

+
image:define_monitor_conditions.png["定义条件"]





==== 细化筛选器

筛选时，在开始键入时，系统会根据当前文本显示一个 * 通配符筛选器 * 。选择此选项将返回与通配符表达式匹配的所有结果。您也可以使用 NOT 或 OR 创建 * 表达式 * ，也可以选择 " 无 " 选项来筛选字段中的空值。

image:Type-Ahead_Monitor_1.png["通配符筛选器"]

基于通配符或表达式（例如 NOT ， OR ， "None" 等）在筛选器字段中显示为深蓝色。您直接从列表中选择的项目将以淡蓝色显示。

image:Type-Ahead-Example-Wildcard-DirectSelect.png["通配符筛选器结果"]

请注意，通配符和表达式筛选适用于文本或列表，但不适用于数值，日期或布尔值。



=== 设置更正操作或追加信息

您可以通过填写 * 添加警报问题描述 * 部分来添加可选的问题描述以及其他见解和 / 或更正操作。问题描述最多可以包含 1024 个字符，并将随警报一起发送。洞察力 / 更正操作字段最多可包含 67 ， 000 个字符，并将显示在警报登录页面的摘要部分中。

在这些字段中，您可以提供注释，链接或更正警报或以其他方式解决警报的步骤。

image:Monitors_Alert_Description.png["警报更正操作和问题描述"]



=== 选择通知类型和收件人

在 _set up team notification （ s ） _ 部分中，您可以选择是通过电子邮件还是 Webhook 向您的团队发出警报。

image:Webhook_Choose_Monitor_Notification.png["选择警报方法"]

* 通过电子邮件警报： *

指定警报通知的电子邮件收件人。如果需要，您可以为警告或严重警报选择不同的收件人。

image:email_monitor_alerts.png["通过电子邮件发送警报收件人"]

* 通过 Webhook 警报： *

指定警报通知的 webhook 。如果需要，您可以为警告或严重警报选择不同的网络挂钩。

image:Webhook_Monitor_Notifications.png["webhook 警报"]



=== 保存您的显示器

. 如果需要，您可以添加监控器的问题描述。
. 为 Monitor 指定一个有意义的名称，然后单击 * 保存 * 。
+
新的监控器将添加到活动监控器列表中。





=== 监控列表

" 监控 " 页面列出了当前配置的监控器，显示以下内容：

* 监控器名称
* 状态
* 正在监控的对象 / 指标
* 监控器的条件


您可以通过单击监控器右侧的菜单并选择 * 暂停 * 来选择临时暂停监控某个对象类型。准备好恢复监控后，单击 * 恢复 * 。

您可以从菜单中选择 * 复制 * 来复制监控器。然后，您可以修改新的监控器并更改对象 / 指标，筛选器，条件，电子邮件收件人等

如果不再需要显示器，您可以从菜单中选择 * 删除 * 来将其删除。



== 监控组

通过分组，您可以查看和管理相关监控器。例如，您可以为环境中的存储配置一个专用监控组，也可以为特定收件人列表配置相关监控器。

image:Monitors_GroupList.png["监控分组"]

组名称旁边会显示组中包含的监控器数量。

要创建新组，请单击 "+" 创建新监控组 * 按钮。输入组的名称，然后单击 * 创建组 * 。此时将创建一个具有此名称的空组。

要向组中添加监控器，请转到 _all monitors_ 组（建议）并执行以下操作之一：

* 要添加单个显示器，请单击该显示器右侧的菜单，然后选择 _Add to Group_ 。选择要将监控器添加到的组。
* 单击监控器名称以打开监控器的编辑视图，然后在 _Associate to a monitor group_ 部分中选择一个组。
+
image:Monitors_AssociateToGroup.png["与组关联"]



通过单击某个组并从菜单中选择 _Remove from Group_ 来删除监控器。您不能从 _all monitors_ 或 _Custom Monitors_ 组中删除监控器。要从这些组中删除监控器，必须删除该监控器本身。


NOTE: 从组中删除监控器不会从 Cloud Insights 中删除该监控器。要完全删除某个监控器，请选择该监控器，然后单击 _Delete_ 。此操作还会将其从所属组中删除，并且任何用户都无法再使用它。

您也可以按相同方式将显示器移动到其他组，选择 _move to Group_ 。


NOTE: 在任何给定时间，每个监控器只能属于一个组。

要一次性暂停或恢复组中的所有监视器，请选择该组的菜单，然后单击 _Pause_ 或 _Resume_ 。

使用同一菜单重命名或删除组。删除组不会从 Cloud Insights 中删除这些监控器；它们在 _all monitors_中 仍然可用。

image:Monitors_PauseGroup.png["暂停组"]



=== 更多信息

* link:task_view_and_manage_alerts.html["查看和忽略警报"]

